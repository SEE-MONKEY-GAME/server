name: Issue auto labels

on:
  issues:
    types: [opened, edited, reopened]

jobs:
  label:
    runs-on: ubuntu-latest
    permissions:
      issues: write

    steps:

      # -----------------------------------------
      # 1) ì‘ì„±ì(issuer)ë³„ ë‹´ë‹¹ì ë¼ë²¨
      # -----------------------------------------
      - name: Add owner label for 5ooyeon
        if: ${{ github.event.issue.user.login == '5ooyeon' }}
        uses: actions-ecosystem/action-add-labels@v1
        with:
          labels: "ğŸ‘¤ @5ooyeon"

      - name: Add owner label for goldenkiwi-hyeuk
        if: ${{ github.event.issue.user.login == 'goldenkiwi-hyeuk' }}
        uses: actions-ecosystem/action-add-labels@v1
        with:
          labels: "ğŸ‘¤ @goldenkiwi-hyeuk"

      # -----------------------------------------
      # 2) ì´ìŠˆ íƒ€ì… ë¼ë²¨ ì •ë¦¬(ì œëª© ì ‘ë‘ì–´ ê¸°ë°˜)
      #    - titleì´ ë°”ë€ ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ê¸°ì¡´ íƒ€ì… ë¼ë²¨ ì œê±° í›„ ë‹¤ì‹œ ë¶€ì—¬
      #    - ì ‘ë‘ì–´ ì˜ˆ: bug:, fix:, question:, help:
      # -----------------------------------------

      # 2-1) ê¸°ì¡´ íƒ€ì… ë¼ë²¨ ì œê±°
      - name: Remove previous type labels
        uses: actions-ecosystem/action-remove-labels@v1
        with:
          labels: |
            ğŸ bug
            â“ question
            ğŸ™‹ help wanted

      # 2-2) íƒ€ì… ë¼ë²¨ ë¶€ì—¬ (ì—¬ëŸ¬ ì ‘ë‘ì–´ ì§€ì›)
      - name: Label as bug
        if: ${{ startsWith(github.event.issue.title, 'bug:') || startsWith(github.event.issue.title, 'fix:') }}
        uses: actions-ecosystem/action-add-labels@v1
        with:
          labels: "ğŸ bug"

      - name: Label as question
        if: ${{ startsWith(github.event.issue.title, 'question:') || contains(github.event.issue.title, '[question]') }}
        uses: actions-ecosystem/action-add-labels@v1
        with:
          labels: "â“ question"

      - name: Label as help wanted
        if: ${{ startsWith(github.event.issue.title, 'help:') || contains(github.event.issue.title, '[help]') }}
        uses: actions-ecosystem/action-add-labels@v1
        with:
          labels: "ğŸ™‹ help wanted"
          
      - name: Add feat
        if: ${{ startsWith(github.event.pull_request.title, 'feat:') }}
        uses: actions-ecosystem/action-add-labels@v1
        with:
          labels: "âœ¨ feat"

      - name: Add chore
        if: ${{ startsWith(github.event.pull_request.title, 'chore:') }}
        uses: actions-ecosystem/action-add-labels@v1
        with:
          labels: "ğŸ”§ chore"

      - name: Add docs
        if: ${{ startsWith(github.event.pull_request.title, 'docs:') }}
        uses: actions-ecosystem/action-add-labels@v1
        with:
          labels: "ğŸ“„ docs"

      - name: Add refactoring
        if: ${{ startsWith(github.event.pull_request.title, 'refactor:') }}
        uses: actions-ecosystem/action-add-labels@v1
        with:
          labels: "â™»ï¸ refactor"

      - name: Add test
        if: ${{ startsWith(github.event.pull_request.title, 'test:') }}
        uses: actions-ecosystem/action-add-labels@v1
        with:
          labels: "ğŸ§ª test"

      - name: Add cleanup
        if: ${{ startsWith(github.event.pull_request.title, 'cleanup:') }}
        uses: actions-ecosystem/action-add-labels@v1
        with:
          labels: "ğŸ§¹ cleanup"
